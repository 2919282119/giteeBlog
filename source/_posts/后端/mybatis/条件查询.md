---
title: mp条件查询
tags: 
- mybatis
categories: 
---
## 条件查询
- 支持链式编程
- 默认是and,or()表示或者    
### 方式一
```java
QueryWrapper<User> queryWrapper = new QueryWrapper<>();
queryWrapper.eq("name", "张三")
            .lt("age", 40)
            .gt("height", 175);
List<User> userList = userMapper.selectList(queryWrapper);
```
### 方式二(lambda方式)
```java
LambdaQueryWrapper<User> queryWrapper = new LambdaQueryWrapper<>();
queryWrapper.eq(User::getName, "张三")
            .lt(User::getAge, 40)
            .gt(User::getHeight, 175);

//queryWrapper.eq(User::getName, "张三")
//            .or() //表示或的关系，不写这个就表示&
//            .like(User::getName, "李");
List<User> userList = userMapper.selectList(queryWrapper);

```
### 空值处理
- 第一个参数传一个条件，如果这个条件为true，该条件查询才生效
```java
LambdaQueryWrapper<Product> queryWrapper = new LambdaQueryWrapper<>();
queryWrapper.lt(Product.getPrice()!=null,Product::getPrice, 20);
```

### 查询投影（只查询某些字段）
- 方式一：lambda方式
```java
LambdaQueryWrapper<User> queryWrapper = new LambdaQueryWrapper<>();
queryWrapper.select(User::getName,User::getAge,User.getHeight)
            .like(User::getName, "李");
List<User> userList = userMapper.selectList(queryWrapper);
```
- 方式二：普通方式(可以进行分组汇总)
```java
QueryWrapper<OrderItem> queryWrapper = new QueryWrapper<>();
queryWrapper.select("orderid","sum(amount) as amt")
            .eq("productid",145) 
            .groupBy("orderid");
List<Map<String, Object>> maps = orderItemMapper.selectMaps(queryWrapper);
//如果不行就用原始的mybatis
```

selectOne用于查单个对象


### 范围查询
```java
queryWrapper.between(User::getAge, 20, 30);

queryWrapper.like(User::getName, "张");
queryWrapper.likeLeft(User::getName, "张");
queryWrapper.likeRight(User::getName, "三");

queryWrapper.lt(User::getAge, 30);
queryWrapper.gt(User::getAge, 20);
queryWrapper.le(User::getAge, 30);//小于等于
queryWrapper.ge(User::getAge, 20);//大于等于

还有having,in,notin,orderByAsc,orderByDesc,groupBy,isNull,isNotNull...
```
[mp官方文档](https://mybatis.plus/guide/)